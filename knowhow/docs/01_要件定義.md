# ノウハウ共有AI音声アシスタント - 要件定義書

**プロジェクト名**: AIでノウハウを組織の資産へ
**クライアント**: JFEシビル株式会社
**プラットフォーム**: Web/PWA（Azure完結）
**作成日**: 2026-02-11
**最終更新**: 2026-02-12

---

## 1. プロジェクト概要

建設・土木現場における熟練者のノウハウ（暗黙知）をAI技術で組織全体の資産として共有・活用するソリューション。AI音声アシスタントを中核技術とし、音声によるナレッジの蓄積・検索・提供を実現する。

### 1.1 解決すべき課題

| 課題 | 現状 | 目標 |
|------|------|------|
| 現場間のノウハウ孤立 | 各現場（A〜D）が独立運営、知識が共有されない | 全現場のナレッジを一元化 |
| 熟練者と新人の格差 | 新人はマニュアル依存、応用力不足 | AIを通じて熟練者の判断力・経験を活用 |
| 熟練者のチェック漏れ | 慣れによる見落とし、類災防止への感受性低下 | AIによる自動チェック・アラート |
| トラブル増加・費用増大 | ノウハウ非共有による品質バラつき | 予防的な知識活用でトラブル・コスト削減 |

### 1.2 熟練者 vs 新人の決定的な差

| 項目 | 熟練者 | 新人 |
|------|--------|------|
| 判断力 | 意図を持った判断 | なんとなく使いまわし |
| 最適化 | 経験に基づく最良判断 | 背景・理由が不明 |
| トラブル対応 | 予測能力あり | 後手対応 |
| コスト管理 | コスト意識が高い | 無駄なコスト発生 |
| 柔軟性 | 応用力・柔軟性 | マニュアル依存 |

---

## 2. ターゲットユーザー

| ユーザー種別 | システムロール | 役割 | 主な利用シーン |
|-------------|--------------|------|-------------|
| 一般作業者（新人・若手） | worker | ノウハウの活用先、教育・スキル向上 | 知識検索、作業中ガイダンス、チェックリスト実行 |
| 熟練者（ベテラン技術者） | expert | ノウハウの蓄積元 + 自身のチェック漏れ防止 | ナレッジ登録・承認、作業前チェック |
| 現場管理者 | site_manager | チーム全体のナレッジ管理 | 進捗確認、ナレッジ品質管理、チーム分析 |
| システム管理者（本社側） | admin | 組織全体のノウハウ資産管理 | ユーザー管理、全体分析・レポート |

---

## 3. 機能要件

### 3.1 AI音声ソリューション（コアフロー）

```
STEP 1: ノウハウ（ルール）収集
  └─ 現場データ・過去データから熟練者のノウハウを収集

STEP 2: AI解析・データベース化
  └─ AI解析 → ベクトル化 → ナレッジDB格納
  └─ Azure Cognitive Search インデックスへの自動登録

STEP 3: 音声ガイドで知識共有
  └─ 音声アシスタントによるプッシュ型提供
  └─ Azure Speech TTS (Nanami Neural Voice) による音声出力

STEP 4: 現場で実践
  └─ 実践結果をフィードバック → 継続的改善
  └─ 利用ログの記録 → 分析ダッシュボードで可視化
```

### 3.2 利用モード

#### モード1: 事務作業モード（施工検討・事前準備）

| 機能 | 説明 | 実装状態 |
|------|------|---------|
| AIチャットボット質問 | チェック項目を対話形式で一つずつ確認 | 実装済み |
| 類災事例の自動提示 | 過去の類似事故・トラブル事例をAIが自動検索して表示 | 実装済み |
| リスク評価アシスト | 計画内容に基づくリスク分析と注意点の提示 | 実装済み |
| 施工計画レビュー | AIによる計画書のチェックポイント確認 | 実装済み |
| 会話履歴管理 | サイドバーで過去の会話セッションを管理 | 実装済み |
| オフライン下書き | ネットワーク断でもテキスト入力・下書き保存 | 実装済み |

#### モード2: 現場作業モード（補修・点検作業中）

| 機能 | 説明 | 実装状態 |
|------|------|---------|
| 音声状況報告 | 作業開始時に音声で現場状況を報告 | 実装済み |
| リアルタイム音声アドバイス | 作業中にAIが音声でアドバイス提供（Azure TTS） | 実装済み |
| 類似事例の音声提示 | 過去の類似事例を音声で案内 | 実装済み |
| ハンズフリー操作 | 音声で操作可能（Web Speech API使用） | 実装済み |
| 関連ナレッジ推薦 | 会話内容に基づいて関連ナレッジをリアルタイム表示 | 実装済み |
| VADエコーキャンセル | TTS再生中のエコーを自動フィルタリング | 実装済み |

### 3.3 ナレッジ管理機能

| 機能 | 説明 | 実装状態 |
|------|------|---------|
| ノウハウ登録 | テキストでノウハウを登録（カテゴリ・工種・リスクレベル選択） | 実装済み |
| カテゴリ分類 | 手順/安全/品質/コスト/設備/材料の6カテゴリ | 実装済み |
| タグ付け | AIによる自動タグ付け + 手動タグ編集 | 実装済み |
| バージョン管理 | ナレッジの更新履歴管理（parent_id連携） | 実装済み |
| 承認ワークフロー | draft → review → published → archived | 実装済み |
| CSV/JSONエクスポート | ナレッジデータのエクスポート | 実装済み |
| 「役に立った」マーク | ナレッジの有用性を記録 | 実装済み |

### 3.4 検索・推薦機能

| 機能 | 説明 | 実装状態 |
|------|------|---------|
| セマンティック検索 | Azure Cognitive Search + Embeddingsによるベクトル検索 | 実装済み |
| ハイブリッド検索 | キーワード + ベクトルの組み合わせ検索 | 実装済み |
| 類似事例検索 | 現在の作業に類似した過去事例の自動検索 | 実装済み |
| コンテキスト連動 | 現場・工種・作業内容に応じた自動絞り込み | 実装済み |

### 3.5 チェックリスト機能

| 機能 | 説明 | 実装状態 |
|------|------|---------|
| チェックリスト作成 | 工種ごとのチェックリスト作成 | 実装済み |
| チェック項目管理 | 必須/推奨/任意の優先度設定 | 実装済み |
| チェック実行 | 現場でのチェック実行・結果記録 | 実装済み |
| ナレッジ連携 | チェック項目と関連ナレッジの紐付け | 実装済み |

### 3.6 事例（インシデント）管理機能

| 機能 | 説明 | 実装状態 |
|------|------|---------|
| 事例登録 | タイトル、内容、原因、対策、重大度を記録 | 実装済み |
| 事例検索 | 工種・重大度・現場によるフィルタリング | 実装済み |
| 類似事例検索 | セマンティック検索による類似事例の発見 | 実装済み |

### 3.7 分析・レポート機能

| 機能 | 説明 | 実装状態 |
|------|------|---------|
| ナレッジ活用状況 | 閲覧数、検索回数、「役に立った」数の集計 | 実装済み |
| ユーザー別学習進捗 | 個人の成長度合いの可視化 | 実装済み |
| リスク傾向分析 | 現場別・工種別のリスク傾向 | 実装済み |
| ナレッジギャップ分析 | 未カバーの領域の特定 | 実装済み |
| チーム分析ダッシュボード | マネージャー向けチーム全体の活動状況 | 実装済み |
| CSV/PDFエクスポート | 分析データのエクスポート | 実装済み |

### 3.8 現場管理機能

| 機能 | 説明 | 実装状態 |
|------|------|---------|
| 現場CRUD | 現場の登録・編集・一覧表示 | 実装済み |
| 現場ステータス管理 | active / completed / suspended | 実装済み |
| ユーザー所属管理 | ユーザーと現場の紐付け | 実装済み |

---

## 4. 非機能要件

| 項目 | 要件 | 実装状態 |
|------|------|---------|
| 可用性 | 99.9%（Azure App Serviceの可用性に準拠） | 実装済み |
| レスポンス | 音声応答: 3秒以内、テキスト検索: 2秒以内 | 実装済み |
| 同時接続 | 100ユーザー以上（Socket.IO + Azure App Service） | 対応済み |
| オフライン対応 | テキスト入力・下書き保存・キャッシュ済みナレッジ閲覧（IndexedDB） | 実装済み |
| セキュリティ | HTTPS必須、JWT認証、helmet.js、レート制限、CORS制御 | 実装済み |
| 音声認識精度 | Web Speech API + Azure Speech SDK、騒音時テキストフォールバック | 実装済み |
| 多言語 | 日本語（ja-JP）を第一言語 | 実装済み |
| ブラウザ対応 | iOS Safari, Chrome, Edge（PWAインストール対応） | 実装済み |
| データ保持 | PostgreSQL（Azure Flexible Server）で永続保持 | 実装済み |

---

## 5. 認証・権限管理

| ユーザー種別 | ロール | 権限 |
|-------------|--------|------|
| 一般作業者（新人） | worker | ナレッジ閲覧・検索、AI質問、チェックリスト実行、自分の活用履歴閲覧 |
| 熟練者 | expert | 上記 + ナレッジ登録・編集、事例登録 |
| 現場管理者 | site_manager | 上記 + 配下メンバーの活用状況閲覧、ナレッジ承認、チーム分析 |
| システム管理者 | admin | 全機能 + ユーザー管理、ロール変更、システム設定 |

### 認証仕様

| 項目 | 仕様 |
|------|------|
| 認証方式 | JWT（JSON Web Token） |
| トークン有効期限 | 24時間 |
| リフレッシュトークン | 7日間 |
| パスワードハッシュ | bcryptjs |
| 自動ログアウト | 30分無操作時 |
| パスワードリセット | メールによるリセット機能 |

---

## 6. データモデル（概要）

### 6.1 主要エンティティ

```
ユーザー (users)
├── id, email, password, name
├── role (worker/expert/site_manager/admin)
├── department, site_id
└── manager_id（階層管理）

現場 (sites)
├── id, name, location, description
└── status (active/completed/suspended)

ナレッジ (knowledge_items)
├── id, title, content, summary（AI生成）
├── category (procedure/safety/quality/cost/equipment/material)
├── work_type, risk_level (low/medium/high/critical)
├── author_id, status (draft/review/published/archived)
├── approved_by, approved_at, version, parent_id
└── view_count, useful_count

ナレッジタグ (knowledge_tags)
├── knowledge_id, tag_name
└── auto_generated

類災事例 (incident_cases)
├── id, title, description, cause, countermeasure
├── site_id, work_type, severity (minor/moderate/serious/critical)
└── occurred_at, reported_by

チェックリスト (checklists)
├── id, name, work_type, description
└── created_by

チェックリスト項目 (checklist_items)
├── checklist_id, content
├── priority (required/recommended/optional)
├── related_knowledge_id, order_index
└──

チェックリスト実行 (checklist_executions)
├── id, checklist_id, user_id, site_id
├── total_items, checked_items
└── status (in_progress/completed), notes

チェックリスト実行項目 (checklist_execution_items)
├── execution_id, checklist_item_id
├── item_content, is_required
└── checked, note

音声セッション (voice_sessions)
├── id, user_id, mode (office/field)
├── site_id, work_type, title
└── status (active/completed/cancelled)

音声セッションメッセージ (voice_session_messages)
├── session_id, role (user/assistant)
├── content, audio_url, confidence
├── related_knowledge_ids[]
└── order_index

利用ログ (usage_logs)
├── user_id, knowledge_id
├── action_type (view/search/voice_query/useful_mark/checklist_use)
├── context_site_id, context_work_type
└── search_query
```

---

## 7. UI/UX要件

### 7.1 デザイン方針

- **モバイルファースト**: 現場でのスマートフォン利用を最優先
- **音声ファースト**: 現場作業中は手が使えないため音声I/Oが基本
- **大きなボタン**: 手袋着用時でも操作可能なUI
- **高コントラスト**: 屋外の直射日光下でも視認可能
- **2モード切替**: 事務作業モード ⇔ 現場作業モードのワンタップ切替

### 7.2 画面構成（実装済み全25画面）

| # | 画面 | パス | 説明 |
|---|------|------|------|
| 1 | ログイン | /login | メール/パスワード認証 |
| 2 | ユーザー登録 | /register | ロール・部署・現場を選択して登録 |
| 3 | ホーム | / | モード選択、最近のナレッジ、クイックアクセス |
| 4 | 事務作業モード | /office-chat | AIチャットボット、サイドバー会話履歴 |
| 5 | 現場作業モード | /field-voice | 音声入力、AI音声応答、関連ナレッジ表示 |
| 6 | ナレッジ一覧 | /knowledge | カテゴリ・工種・状態でフィルタ |
| 7 | ナレッジ作成 | /knowledge/new | テキスト入力でナレッジ登録 |
| 8 | ナレッジ詳細 | /knowledge/:id | 内容表示、編集、「役に立った」マーク |
| 9 | ナレッジ検索 | /knowledge/search | セマンティック検索 |
| 10 | 事例一覧 | /incidents | 重大度・工種でフィルタ |
| 11 | 事例作成 | /incidents/new | 事例報告（原因・対策記入） |
| 12 | 事例詳細 | /incidents/:id | 事例の詳細表示 |
| 13 | チェックリスト一覧 | /checklists | 工種別チェックリスト |
| 14 | チェックリスト作成 | /checklists/new | チェック項目の作成・編集 |
| 15 | チェックリスト詳細 | /checklists/:id | チェック実行・結果記録 |
| 16 | リスク評価 | /risk-assessment | AI活用リスク評価ツール |
| 17 | 安全ハブ | /safety | 安全関連の統合ハブ画面 |
| 18 | 分析ダッシュボード | /analytics | チーム活動・利用状況の可視化 |
| 19 | ユーザー分析 | /analytics/users/:id | 個人別統計・パフォーマンス |
| 20 | セッション履歴 | /sessions | 過去の音声セッション一覧 |
| 21 | セッション詳細 | /sessions/:id | セッション内のトランスクリプト |
| 22 | 現場一覧 | /sites | 現場の管理 |
| 23 | 現場作成 | /sites/new | 新規現場の登録 |
| 24 | 現場詳細 | /sites/:id | 現場の詳細情報 |

---

## 8. 受け入れ基準

| 項目 | 基準 | 現状 |
|------|------|------|
| 音声認識 | 日本語認識精度85%以上（屋内環境） | Web Speech API + Azure Speech SDKで達成 |
| AI応答速度 | 質問から回答まで3秒以内 | Azure OpenAI (GPT-4o-mini) で達成 |
| 類似事例検索 | 関連度上位5件の適合率80%以上 | Azure Cognitive Searchで対応 |
| UX | 主要操作3タップ以内（音声操作は1コマンド） | 達成 |
| オフライン | ネットワーク断でもキャッシュ済みデータの閲覧可能 | IndexedDB + Workboxで達成 |
| ナレッジ登録 | テキスト入力で5分以内にナレッジ登録完了 | 達成 |

---

## 9. 将来の拡張予定

- ドキュメント自動取り込み（PDF/Word → ナレッジ化）
- 画像認識によるナレッジ検索（現場写真から関連ナレッジを検索）
- AR連携（現場でのナレッジオーバーレイ表示）
- 多言語対応（外国人技術者向け）
- Salesforce / SAP等の既存業務システムとの連携
- プッシュ型ナレッジ提案の高度化（作業計画書解析による自動推薦）
- Azure Notification Hubsによるプッシュ通知
- 高度な分析機能（成約パターンAI分析、予測分析）
